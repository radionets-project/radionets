consistent use of batch_size